<div class="p-grid">
  <div class="p-col">
    <p-card header="List of all duties">
      <p-table [value]="dutiesSortedAlphabetically" dataKey="id">

        <ng-template pTemplate="body" let-duty let-expanded="expanded">
          <tr>
            <td class="short alignTop">
              <button *ngIf="duty.comment" type="button" pButton pRipple [pRowToggler]="duty" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
            </td>
            <td>
              <p>{{duty.title}}</p>
              <p class="medium">
                <i class="pi pi-calendar medium"></i> &nbsp; 
                {{ duty.dateStart | date }} &nbsp; 
              <p class="medium" *ngIf="duty.frequencyNumber">
                <i class="pi pi-replay medium"></i> &nbsp;
                Every {{ duty.frequencyNumber }} {{ duty.frequencyUnit }}
              </p>
            </td>
            <td class="alignTop">
              <button type="button" pButton pRipple class="p-button-text p-button-rounded p-button-plain" (click)="selectDuty(duty)"><i class="pi pi-pencil"></i></button> 
              <button type="button" pButton pRipple class="p-button-text p-button-rounded p-button-plain"><i class="pi pi-trash"></i></button>
            </td>
          </tr>

      </ng-template>
      
      <ng-template pTemplate="rowexpansion" let-duty>
        <tr>  
          <td class="short">
            <p></p>
          </td>
          <td>
            <p class="medium">{{ duty.comment }}</p>
        </td>

        </tr>
      </ng-template>

      </p-table>
    </p-card>
  </div>
  <div class="p-col">
    <p-card header="Add new">
     
      <form name="manageDutiesForm" #form="ngForm">
        <div class="p-fluid grid">
          <div class="p-field p-col-12">
            <span class="p-float-label">
              <input id="float-input" type="text" pInputText [(ngModel)]="currentDuty.title" name="title">
              <label for="title">Title</label>
            </span>
          </div>
          <div class="p-field p-col-12">
            <span class="p-float-label">
              <input id="float-input" type="text" pInputText [(ngModel)]="currentDuty.comment" name="comment">
              <label for="comment">Comment</label>
            </span>
          </div> 
            <div class="p-field p-col">
              <span class="p-float-label">
                <p-dropdown [(ngModel)]="currentDuty.frequency" [options]="optionsFrequency" name="frequency" optionLabel="name" optionValue="value"></p-dropdown>  
                <label for="frequency">Frequency</label>
              </span>
            </div> 
            <div class="p-field p-col">
              <span class="p-float-label">
                <p-calendar [(ngModel)]="currentDuty.dateStart" dateFormat="dd.mm.yy"></p-calendar>
                <label for="comment">When</label>
              </span>
            </div>
       </div>
      </form>
    </p-card>
  </div>
</div>

{{ currentDuty | json }}



